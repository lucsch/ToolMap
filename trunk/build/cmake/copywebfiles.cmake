# COPY HTML AND JS FILES
# PART OF TOOLMAP BUILD PROCESS
include(BundleUtilities)
FILE (GLOB WEBFILES "../resource/web/*.js" "../resource/web/*.html")
#MESSAGE ("Webfiles: ${WEBFILES}")

SET (WEB_DESTINATION "share/toolmap")

IF (NOT APPLE)
  FOREACH(MYFULLFILE IN LISTS WEBFILES)
    GET_FILENAME_COMPONENT (MYFILE ${MYFULLFILE} NAME)
    add_custom_command(TARGET ${CMAKE_PROJECT_NAME} POST_BUILD
      COMMAND ${CMAKE_COMMAND} -E copy_if_different
      "${MYFULLFILE}" 
      "${PROJECT_BINARY_DIR}/${WEB_DESTINATION}/${MYFILE}")
    MESSAGE (STATUS "Copying: ${MYFILE} -> ${PROJECT_BINARY_DIR}/${WEB_DESTINATION}/${MYFILE}")
  ENDFOREACH()
ENDIF (NOT APPLE)


IF (APPLE)
  SET(MYAPP_DIR "${CMAKE_BINARY_DIR}/${CMAKE_CFG_INTDIR}/${CMAKE_PROJECT_NAME}.app/Contents")
  MESSAGE ("My app dir: ${MYAPP_DIR}")
  FOREACH (MYFULLFILE IN LISTS WEBFILES)
    GET_FILENAME_COMPONENT (MYFILE ${MYFULLFILE} NAME)
    add_custom_command(TARGET ${CMAKE_PROJECT_NAME} POST_BUILD
      COMMAND ${CMAKE_COMMAND} -E copy_if_different
      "${MYFULLFILE}" 
      "${MYAPP_DIR}/${WEB_DESTINATION}/${MYFILE}")
    #MESSAGE(STATUS "Copying: ${MYFULLFILE} -> ${MYAPP_DIR}/${WEB_DESTINATION}/${MYFILE}")
  ENDFOREACH()
ENDIF(APPLE)


